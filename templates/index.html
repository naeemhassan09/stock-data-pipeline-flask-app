<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Investment Return & Portfolio Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <h1 class="mt-4">Investment Return & Portfolio Calculator</h1>
    <form method="post" class="mt-4">
        <div class="form-group">
            <label for="investment">Enter Investment Amount ($):</label>
            <input type="number" step="any" class="form-control" id="investment" name="investment" required>
        </div>
        <button type="submit" class="btn btn-primary">Calculate Returns</button>
    </form>
    {% if results %}
    <h2 class="mt-5">Individual Asset Predictions (Test Period: Jan 2023 - Mar 2023)</h2>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Asset</th>
                <th>Cumulative Return (%)</th>
                <th>Predicted Value ($)</th>
            </tr>
        </thead>
        <tbody>
            {% for asset, data in results.items() %}
            <tr>
                <td>{{ asset }}</td>
                <td>{{ (data.Cumulative_Return * 100) | round(2) }}%</td>
                <td>${{ data.Predicted_Value | round(2) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h2 class="mt-5">Balanced Portfolio Prediction</h2>
    {% if portfolio.Portfolio_Cumulative_Return is not none %}
      <p><strong>Portfolio Cumulative Return (%):</strong> {{ (portfolio.Portfolio_Cumulative_Return * 100) | round(2) }}%</p>
      <p><strong>Portfolio Predicted Value ($):</strong> ${{ portfolio.Portfolio_Predicted_Value | round(2) }}</p>
    {% else %}
      <p>No positive-performing assets found to create a balanced portfolio.</p>
    {% endif %}
    
    <h3 class="mt-3">Additional Portfolio Metrics</h3>
    {% if metrics %}
    <ul>
        <li><strong>Average Daily Return (%):</strong> {{ (metrics["Average Daily Return"] * 100) | round(2) }}%</li>
        <li><strong>Volatility (Std Dev %) :</strong> {{ (metrics["Volatility"] * 100) | round(2) }}%</li>
        <li><strong>Sharpe Ratio:</strong> {% if metrics["Sharpe Ratio"] is not none %}{{ metrics["Sharpe Ratio"] | round(4) }}{% else %}N/A{% endif %}</li>
    </ul>
    {% else %}
      <p>No portfolio metrics available.</p>
    {% endif %}
    
    <h2 class="mt-5">Correlation Matrix (Training Data: 2022 - 2024)</h2>
    <div class="table-responsive">
        {{ correlation_html | safe }}
    </div>
    {% endif %}
</div>
</body>
</html>